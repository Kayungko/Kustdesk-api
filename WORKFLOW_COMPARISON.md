# ğŸ”„ GitHub Actions å·¥ä½œæµå¯¹æ¯”åˆ†æ

## ğŸ“Š **åŸä½œè€… vs æˆ‘ä»¬çš„å®ç°å¯¹æ¯”**

### ğŸ¯ **è§¦å‘ç­–ç•¥å¯¹æ¯”**

| æ–¹é¢ | åŸä½œè€…å®ç° | æˆ‘ä»¬çš„å®ç° | å»ºè®® |
|------|------------|------------|------|
| **è§¦å‘æ¡ä»¶** | ä»…ç‰ˆæœ¬æ ‡ç­¾ + æ‰‹åŠ¨è§¦å‘ | åˆ†æ”¯æ¨é€ + æ ‡ç­¾ + PR | âœ… ä¿æŒæˆ‘ä»¬çš„æ–¹å¼ |
| **çµæ´»æ€§** | é«˜ï¼ˆå¤šå‚æ•°é…ç½®ï¼‰ | ä¸­ç­‰ | ğŸ“ˆ å¯ä»¥å¢å¼º |
| **åé¦ˆé€Ÿåº¦** | æ…¢ï¼ˆä»…å‘å¸ƒæ—¶ï¼‰ | å¿«ï¼ˆæ¯æ¬¡æ¨é€ï¼‰ | âœ… æˆ‘ä»¬æ›´å¥½ |

### ğŸ—ï¸ **æ„å»ºç­–ç•¥å¯¹æ¯”**

| æ–¹é¢ | åŸä½œè€…å®ç° | æˆ‘ä»¬çš„å®ç° | ä¼˜åŠ£åˆ†æ |
|------|------------|------------|----------|
| **æ„å»ºæ–¹å¼** | äº¤å‰ç¼–è¯‘ â†’ Docker | å®¹å™¨å†…ç¼–è¯‘ | åŸä½œè€…æ›´ä¸“ä¸š |
| **äº§ç‰©ç±»å‹** | äºŒè¿›åˆ¶+Debian+Docker | ä»…Docker | åŸä½œè€…æ›´å…¨é¢ |
| **æ¶æ„æ”¯æŒ** | amd64/arm64/armv7l/windows | amd64/arm64 | åŸä½œè€…æ›´å¹¿æ³› |
| **æ„å»ºæ—¶é—´** | é•¿ï¼ˆå¤šæ­¥éª¤ï¼‰ | çŸ­ï¼ˆå¹¶è¡Œï¼‰ | æˆ‘ä»¬æ›´å¿« |

### ğŸ”§ **æŠ€æœ¯å®ç°å¯¹æ¯”**

#### **åŸä½œè€…çš„ä¼˜ç§€å®è·µ**

1. **æ™ºèƒ½ç¯å¢ƒå˜é‡**
```yaml
env:
  BASE_IMAGE_NAMESPACE: ${{ github.event.inputs.BASE_IMAGE_NAMESPACE || github.actor }}
  SKIP_DOCKER_HUB: ${{ github.event.inputs.SKIP_DOCKER_HUB || 'false' }}
```

2. **Webå®¢æˆ·ç«¯é›†æˆ**
```yaml
- uses: actions/checkout@v4
  with:
    repository: Kayungko/Kustdesk-api-web
    path: rustdesk-api-web
    ref: master
- name: build rustdesk-api-web
  working-directory: rustdesk-api-web
  run: |
    npm install
    npm run build
    mkdir -p ../resources/admin/
    cp -ar dist/* ../resources/admin/
```

3. **å®Œæ•´çš„å‘å¸ƒæµç¨‹**
```yaml
- name: Upload to GitHub Release
  uses: softprops/action-gh-release@v2
- name: Generate Changelog
  run: npx changelogithub
```

4. **å¤šæ¶æ„Docker Manifest**
```yaml
- name: Create and push manifest Docker Hub
  uses: Noelware/docker-manifest-action@v0.2.3
```

#### **æˆ‘ä»¬çš„ä¼˜ç§€å®è·µ**

1. **å®Œæ•´çš„æµ‹è¯•æµç¨‹**
```yaml
- name: Run tests (with Redis)
- name: Run security scan
- name: Run linting
```

2. **PRæµ‹è¯•æ”¯æŒ**
```yaml
on:
  pull_request:
    branches: [ main, master ]
```

3. **è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆ**
```yaml
- name: Generate Swagger docs
- name: Update Docker Hub description
```

## ğŸ’¡ **æ”¹è¿›å»ºè®®**

### ğŸ¯ **ä¿ç•™æˆ‘ä»¬çš„ä¼˜åŠ¿**
- âœ… å¿«é€ŸCI/CDåé¦ˆ
- âœ… å®Œæ•´çš„æµ‹è¯•å’Œå®‰å…¨æ‰«æ
- âœ… PRæµ‹è¯•æ”¯æŒ
- âœ… è‡ªåŠ¨æ–‡æ¡£åŒæ­¥

### ğŸ“ˆ **å€Ÿé‰´åŸä½œè€…çš„ä¼˜åŠ¿**
- ğŸ”„ æ·»åŠ Webå®¢æˆ·ç«¯è‡ªåŠ¨é›†æˆ
- ğŸ”§ å¢å¼ºé…ç½®çµæ´»æ€§
- ğŸ“¦ æ”¯æŒå¤šç§å‘å¸ƒæ ¼å¼ï¼ˆå¯é€‰ï¼‰
- ğŸš€ å®Œå–„çš„Releaseæµç¨‹

### ğŸ”„ **å»ºè®®çš„æ··åˆæ–¹æ¡ˆ**

#### **æ–¹æ¡ˆ1ï¼šåŒå·¥ä½œæµç­–ç•¥**
- **`ci.yml`**: å¿«é€ŸCIï¼ˆç°æœ‰æ–¹å¼ï¼‰- æ¯æ¬¡æ¨é€è§¦å‘
- **`release.yml`**: å®Œæ•´å‘å¸ƒï¼ˆå€Ÿé‰´åŸä½œè€…ï¼‰- æ ‡ç­¾è§¦å‘

#### **æ–¹æ¡ˆ2ï¼šå¢å¼ºç°æœ‰å·¥ä½œæµ**
- ä¿æŒç°æœ‰CIåŠŸèƒ½
- æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼Œæ ‡ç­¾æ¨é€æ—¶æ‰§è¡Œå®Œæ•´å‘å¸ƒ

## ğŸš€ **æ¨èå®æ–½æ­¥éª¤**

### é˜¶æ®µ1ï¼šå¢å¼ºç°æœ‰å·¥ä½œæµ âš¡
1. æ·»åŠ Webå®¢æˆ·ç«¯é›†æˆ
2. å¢å¼ºç¯å¢ƒå˜é‡é…ç½®
3. å®Œå–„å‘å¸ƒæµç¨‹

### é˜¶æ®µ2ï¼šå¯é€‰å¢å¼ºåŠŸèƒ½ ğŸ“¦
1. æ·»åŠ äºŒè¿›åˆ¶åŒ…å‘å¸ƒ
2. æ·»åŠ DebianåŒ…æ„å»º
3. å¢åŠ æ›´å¤šæ¶æ„æ”¯æŒ

### é˜¶æ®µ3ï¼šé«˜çº§åŠŸèƒ½ ğŸ¯
1. è‡ªåŠ¨Changelogç”Ÿæˆ
2. å¤šé•œåƒä»“åº“æ”¯æŒ
3. å®Œå–„çš„Manifestç®¡ç†

## ğŸ“Š **ç»“è®º**

| åŠŸèƒ½ | é‡è¦æ€§ | å®æ–½éš¾åº¦ | å»ºè®®ä¼˜å…ˆçº§ |
|------|--------|----------|------------|
| Webå®¢æˆ·ç«¯é›†æˆ | â­â­â­â­â­ | ğŸŸ¢ ä½ | ğŸ”¥ ç«‹å³ |
| ç¯å¢ƒå˜é‡å¢å¼º | â­â­â­â­ | ğŸŸ¢ ä½ | ğŸ”¥ ç«‹å³ |
| Releaseæµç¨‹ | â­â­â­ | ğŸŸ¡ ä¸­ | â³ ä¸‹ä¸€æ­¥ |
| äºŒè¿›åˆ¶åŒ…å‘å¸ƒ | â­â­ | ğŸ”´ é«˜ | ğŸ“… å¯é€‰ |
| å¤šæ¶æ„æ”¯æŒ | â­â­â­ | ğŸŸ¡ ä¸­ | â³ ä¸‹ä¸€æ­¥ |

---

**ğŸ¯ å»ºè®®ï¼šå…ˆå®æ–½é«˜ä¼˜å…ˆçº§çš„æ”¹è¿›ï¼Œä¿æŒæˆ‘ä»¬çš„CI/CDä¼˜åŠ¿ï¼Œé€æ­¥å€Ÿé‰´åŸä½œè€…çš„å®Œæ•´å‘å¸ƒæµç¨‹ã€‚**
